<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style4.css') }}">
</head>
<body>
    <nav class="navbar">
        <a href="/todo" class="nav-link">To Do</a>
        <a href="/plan" class="nav-link">Plan</a>
        <a href="/user" class="nav-link clickedNav">User</a>
    </nav>

    <div class="user-profile-container">
        <header class="profile-header">
            <h1>User Profile</h1>
            <p>Welcome to your Workout Journey!!!</p>
        </header>

        <h2 class="user-name">{{ user.username }}</h2>

        <div class="personal-info">
            <h3>Personal Info:</h3>
            <p>Name: {{ user.name }}</p>
            <p>Sex: {{ user.sex }}</p>
            <p>Height: {{ user.height }} cm</p>
            <p>Weight: {{ user.weight }} kg</p>
            <p>Goal Weight: {{ user.goal_weight }} kg</p>
        </div>

        <div class="workout-track">
            <div class="track-placeholder">
                <p>[Workout Track] : A calendar to display the number of days the user has exercised</p>
            </div>
        </div>

        <div class="profile-buttons">
            <button class="update-profile-btn" onclick="window.location.href='/update';">Update My Profile</button>
            <button class="gebnerate-plan-btn">Generate Weekly Plan</button>
            <button class="check-data-btn" onclick="window.location.href='/data';">Check My Data</button>
        </div>

        <footer class="profile-footer">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et.</p>
            <p>All rights reserved. <a href="#">Privacy policy</a></p>
        </footer>
    </div>
</body>
<script>
    document.querySelector('.generate-plan-btn').addEventListener('click', function() {
        fetch('/api/generate-weekly-plan', {
            method: 'POST', 
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(result => {
            if (result.success) {
                alert('Weekly plan generated successfully!');
                console.log('Generated plan:', result.plan); 
            } else {
                alert('Failed to generate weekly plan: ' + result.message);
            }
        })
        .catch(error => {
            console.error('Error generating weekly plan:', error);
            alert('An error occurred while generating the weekly plan.');
        });
    });
</script>
</html>
